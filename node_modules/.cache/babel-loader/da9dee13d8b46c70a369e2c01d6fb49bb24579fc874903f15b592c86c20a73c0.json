{"ast":null,"code":"import _regeneratorRuntime from\"/home/fabrizia/HNG-Internship-X/stage-2/movie-discovery-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/fabrizia/HNG-Internship-X/stage-2/movie-discovery-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/fabrizia/HNG-Internship-X/stage-2/movie-discovery-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import HeartIcon from'./fav';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Card(_ref){var movie=_ref.movie;console.log('Movie data:',movie);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFavorite=_useState2[0],setIsFavorite=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),genres=_useState4[0],setGenres=_useState4[1];var toggleFavorite=function toggleFavorite(e){e.preventDefault();// Prevent the default link behavior\nsetIsFavorite(!isFavorite);};useEffect(function(){var _fetchGenres;function fetchGenres(){return(_fetchGenres=_fetchGenres||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('https://api.themoviedb.org/3/genre/movie/list',{params:{api_key:'9724ee7735f6229f16425966d22d4ff6'}});case 3:response=_context.sent;setGenres(response.data.genres);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error fetching genres:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}))).apply(this,arguments);}fetchGenres();},[]);// Function to get genre names based on genre IDs\nvar getGenreNames=function getGenreNames(){return movie.genre_ids.map(function(genreId){var genre=genres.find(function(genre){return genre.id===genreId;});return genre?genre.name:'';});};return/*#__PURE__*/_jsx(\"div\",{className:\"movie-card\",children:/*#__PURE__*/_jsxs(Link,{to:\"/movies/\".concat(movie.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w500/\".concat(movie.poster_path),alt:movie.title,\"data-testid\":\"movie-poster\"}),/*#__PURE__*/_jsx(\"div\",{className:\"favorite-icon \".concat(isFavorite?'favorite':''),onClick:toggleFavorite,children:/*#__PURE__*/_jsx(HeartIcon,{})})]}),/*#__PURE__*/_jsx(\"h2\",{\"data-testid\":\"movie-title\",children:movie.title}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"movie-release-date\",children:movie.release_date}),/*#__PURE__*/_jsx(\"p\",{className:\"movie-genres\",children:getGenreNames().join(', ')})]})});}export default Card;","map":{"version":3,"names":["React","useState","useEffect","Link","HeartIcon","axios","jsx","_jsx","jsxs","_jsxs","Card","_ref","movie","console","log","_useState","_useState2","_slicedToArray","isFavorite","setIsFavorite","_useState3","_useState4","genres","setGenres","toggleFavorite","e","preventDefault","_fetchGenres","fetchGenres","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","params","api_key","sent","data","t0","error","stop","apply","arguments","getGenreNames","genre_ids","map","genreId","genre","find","id","name","className","children","to","concat","src","poster_path","alt","title","onClick","release_date","join"],"sources":["/home/fabrizia/HNG-Internship-X/stage-2/movie-discovery-app/src/components/card.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport HeartIcon from './fav';\nimport axios from 'axios';\n\n\nfunction Card({ movie }) {\n  console.log('Movie data:', movie);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [genres, setGenres] = useState([]);\n\n  const toggleFavorite = (e) => {\n    e.preventDefault(); // Prevent the default link behavior\n    setIsFavorite(!isFavorite);\n  };\n\n  useEffect(() => {\n    async function fetchGenres() {\n      try {\n        const response = await axios.get(\n          'https://api.themoviedb.org/3/genre/movie/list',\n          {\n            params: {\n              api_key: '9724ee7735f6229f16425966d22d4ff6',\n            },\n          }\n        );\n        setGenres(response.data.genres);\n      } catch (error) {\n        console.error('Error fetching genres:', error);\n      }\n    }\n\n    fetchGenres();\n  }, []);\n\n  // Function to get genre names based on genre IDs\n  const getGenreNames = () => {\n    return movie.genre_ids.map((genreId) => {\n      const genre = genres.find((genre) => genre.id === genreId);\n      return genre ? genre.name : '';\n    });\n  };\n\n  return (\n    <div className=\"movie-card\">\n      <Link to={`/movies/${movie.id}`}>\n        {/* Container for the image and HeartIcon */}\n        <div className=\"image-container\">\n          <img\n            src={`https://image.tmdb.org/t/p/w500/${movie.poster_path}`}\n            alt={movie.title}\n            data-testid=\"movie-poster\"\n          />\n          {/* Position the HeartIcon in the top right corner */}\n          <div className={`favorite-icon ${isFavorite ? 'favorite' : ''}`} onClick={toggleFavorite}>\n            <HeartIcon />\n          </div>\n        </div>\n        <h2 data-testid=\"movie-title\">{movie.title}</h2>\n        <p data-testid=\"movie-release-date\">{movie.release_date}</p>\n        <p className=\"movie-genres\">{getGenreNames().join(', ')}</p>\n      </Link>\n    </div>\n  );\n}\n\nexport default Card;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}